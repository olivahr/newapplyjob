<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Aplicaci√≥n de Empleo / Job Application</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#f3f4f6;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#475569;
  --line:#e5e7eb;
  --blue:#2563eb;
  --blue2:#1d4ed8;
  --mint:#d7f3ec;
  --mintB:#b6eadc;
  --radius:18px;
}
html{-webkit-text-size-adjust:100%;text-size-adjust:100%;}
*{box-sizing:border-box;font-family:Inter,sans-serif}
body{margin:0;background:var(--bg);color:var(--text)}
a{color:var(--blue);text-decoration:none}
strong{font-weight:700}

/* Layout */
.app{
  max-width:1120px;
  margin:26px auto;
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:0 20px 60px rgba(0,0,0,.12);
  padding:28px;
  display:grid;
  grid-template-columns: 280px 1fr;
  gap:28px;
}

/* Header */
.top{
  grid-column: 1 / -1;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
  padding-bottom:10px;
  border-bottom:1px solid var(--line);
  margin-bottom:6px;
}
.brand{font-weight:800;letter-spacing:.2px}
.step-pill{
  font-size:13px;
  color:var(--muted);
  background:#f8fafc;
  border:1px solid var(--line);
  padding:8px 12px;
  border-radius:999px;
  display:flex;
  gap:10px;
  align-items:center;
  white-space:nowrap;
}

/* Progress bar */
.progress-wrap{
  grid-column: 1 / -1;
  margin-top:6px;
  margin-bottom:6px;
}
.progress-bar{
  height:10px;
  background:#eef2ff;
  border:1px solid var(--line);
  border-radius:999px;
  overflow:hidden;
}
.progress{
  height:100%;
  width:0%;
  background:linear-gradient(90deg, var(--blue), #4f46e5);
  transition:width .25s ease;
}

/* Map */
.map{
  position:sticky;
  top:18px;
  align-self:start;
  padding:8px 6px;
}
.map-title{
  font-size:13px;
  color:var(--muted);
  font-weight:700;
  letter-spacing:.2px;
  margin:0 0 10px;
  text-transform:uppercase;
}
.timeline{
  position:relative;
  padding-left:18px;
}
.timeline::before{
  content:"";
  position:absolute;
  left:8px;
  top:6px;
  bottom:6px;
  width:2px;
  background:linear-gradient(180deg, #cbd5e1, #e2e8f0);
  border-radius:999px;
}
.mstep{
  position:relative;
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 8px;
  border-radius:12px;
  cursor:pointer;
  user-select:none;
}
.mstep:hover{background:#f8fafc}
.dot{
  width:28px;height:28px;
  border-radius:10px;
  display:flex;align-items:center;justify-content:center;
  font-weight:800;
  border:1px solid #d1d5db;
  background:#f3f4f6;
  color:#64748b;
  flex:0 0 auto;
}
.mtext{display:flex;flex-direction:column;gap:2px}
.mtext .t1{font-weight:700;font-size:13px}
.mtext .t2{font-size:12px;color:var(--muted)}
.mstep.active{
  background:#eef2ff;
  outline:2px solid rgba(37,99,235,.18);
}
.mstep.active .dot{
  background:var(--blue);
  border-color:transparent;
  color:#fff;
}
.mstep.done .dot{
  background:var(--mint);
  border:2px solid var(--mintB);
  color:#1b8f6a;
}
.mstep.locked{opacity:.55;cursor:not-allowed}

/* Form */
.panel{padding:6px 6px 10px}
h2{font-size:22px;margin:0 0 14px}
p{font-size:14px;color:#334155;line-height:1.8;margin:0 0 12px}
.form-step{display:none}
.form-step.active{display:block}

/* Inputs */
label{
  display:block;
  margin-top:18px;
  font-size:14px;
  font-weight:800;
  color:#0f172a;
}
input,select,textarea{
  width:100%;
  padding:14px;
  margin-top:6px;
  border:1px solid #d1d5db;
  border-radius:12px;
  font-size:16px; /* iPhone no zoom */
  outline:none;
  background:#fff;
}
input:focus,select:focus,textarea:focus{
  border-color:#60a5fa;
  box-shadow:0 0 0 4px rgba(59,130,246,.15);
}
textarea{min-height:110px;resize:vertical}

/* Checkbox rows */
.check{
  display:flex;
  gap:10px;
  margin-top:14px;
  font-size:14px;
  color:#0f172a;
  align-items:flex-start;
}
.check input{width:18px;height:18px;margin-top:2px}

/* Buttons */
.buttons{
  display:flex;
  justify-content:space-between;
  gap:12px;
  margin-top:26px;
  padding-top:12px;
  border-top:1px solid var(--line);
}
button{
  padding:14px 22px;
  border:none;
  border-radius:999px;
  font-size:14px;
  font-weight:900;
  cursor:pointer;
}
.prev{background:#e5e7eb;color:#111827}
.next{background:var(--blue);color:#fff}
.next:hover{background:var(--blue2)}
button:disabled{opacity:.45;pointer-events:none}

/* Assessment 9-18 */
.form-step[data-step="9"] label,
.form-step[data-step="10"] label,
.form-step[data-step="11"] label,
.form-step[data-step="12"] label,
.form-step[data-step="13"] label,
.form-step[data-step="14"] label,
.form-step[data-step="15"] label,
.form-step[data-step="16"] label,
.form-step[data-step="17"] label,
.form-step[data-step="18"] label{
  margin-top:10px;
  font-weight:800;
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px 12px;
  border:1px solid var(--line);
  border-radius:12px;
  background:#fff;
  cursor:pointer;
}
.form-step[data-step="9"] label input,
.form-step[data-step="10"] label input,
.form-step[data-step="11"] label input,
.form-step[data-step="12"] label input,
.form-step[data-step="13"] label input,
.form-step[data-step="14"] label input,
.form-step[data-step="15"] label input,
.form-step[data-step="16"] label input,
.form-step[data-step="17"] label input,
.form-step[data-step="18"] label input{
  width:18px;height:18px;margin:0;
}
.pair-error{
  background:#fef2f2;
  border:1px solid #fecaca;
  padding:10px 12px;
  border-radius:12px;
}

/* Mobile fix */
@media (max-width: 920px){
  .app{
    grid-template-columns:1fr;
    margin:0;
    border-radius:0;
    padding:16px;
    gap:14px;
  }
  .map{
    position:relative;
    top:auto;
    padding:10px;
    border:1px solid var(--line);
    border-radius:14px;
    background:#fff;
    max-height:180px;
    overflow:auto;
    -webkit-overflow-scrolling:touch;
  }
  .timeline{padding-left:0}
  .timeline::before{display:none}
  .panel{padding:0}
}

/* Final blanco + confetti */
.final-screen{
  position:fixed;
  inset:0;
  background:#fff;
  display:none;
  align-items:center;
  justify-content:center;
  z-index:99998;
  padding:18px;
}
.final-screen.show{display:flex;}
.final-card{
  width:min(560px,100%);
  border:1px solid #e5e7eb;
  border-radius:16px;
  padding:18px;
  box-shadow:0 20px 60px rgba(0,0,0,.14);
  text-align:center;
}
.final-card h3{
  margin:6px 0 6px;
  font-size:18px;
  font-weight:900;
  color:#0f172a;
}
.final-card p{
  margin:0;
  color:#334155;
  font-size:14px;
  line-height:1.5;
}
#confettiCanvas{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:99999;
}
</style>
</head>

<body>
<div class="app">

  <div class="top">
    <div class="brand">Aplicaci√≥n de Empleo / Job Application</div>
    <div class="step-pill">
      <span id="stepCounter">Paso 1 de 18 / Step 1 of 18</span>
      <span>‚Ä¢</span>
      <span id="timeHint">Aprox. 20‚Äì35 min / Approx. 20‚Äì35 min</span>
    </div>
  </div>

  <div class="progress-wrap">
    <div class="progress-bar"><div class="progress" id="progress"></div></div>
  </div>

  <aside class="map" aria-label="Mapa de progreso / Progress map">
    <div class="map-title">Progreso / Progress</div>
    <div class="timeline" id="timeline"></div>
  </aside>

  <main class="panel">
    <form id="wizard" novalidate>

      <!-- PASO 1 -->
      <section class="form-step active" data-step="1">
        <h2>Paso 1 ‚Äî Bienvenida a la aplicaci√≥n / Step 1 ‚Äî Application welcome</h2>
        <p>
          Gracias por tu inter√©s en participar en operaciones corporativas de gran escala. <br>
          This application is for large-scale corporate operations.
        </p>
        <p>
          Esta aplicaci√≥n corresponde a una <strong>evaluaci√≥n inicial</strong>, utilizada para determinar compatibilidad b√°sica con roles operativos y de soporte. <br>
          This is an <strong>initial evaluation</strong> used to determine basic fit for operational and support roles.
        </p>
        <p>
          El proceso est√° dise√±ado para ser claro, estructurado y transparente. No se requiere experiencia espec√≠fica para completar esta etapa. <br>
          The process is designed to be clear, structured, and transparent. No specific experience is required for this stage.
        </p>
        <p>
          Tiempo estimado de la aplicaci√≥n: <strong>15 a 25 minutos</strong>. Recomendamos completarla en una sola sesi√≥n. <br>
          Estimated time: <strong>15 to 25 minutes</strong>. We recommend completing it in one session.
        </p>
        <div class="buttons">
          <span></span>
          <button type="button" class="next">Continuar / Continue</button>
        </div>
      </section>

      <!-- PASO 2 -->
      <section class="form-step" data-step="2">
        <h2>Paso 2 ‚Äî Identificaci√≥n personal / Step 2 ‚Äî Personal identification</h2>
        <p>La informaci√≥n ingresada en esta secci√≥n debe coincidir con documentos oficiales. <br> The information entered must match official documents.</p>
        <p>Aseg√∫rate de escribir correctamente tu nombre legal completo y un correo electr√≥nico activo. <br> Please enter your full legal name and an active email.</p>

        <label>Nombre legal (como aparece en documentos) / Legal first name (as shown on documents)</label>
        <input required name="nombre">

        <label>Apellido legal / Legal last name</label>
        <input required name="apellido">

        <label>Correo electr√≥nico de contacto / Contact email</label>
        <input type="email" required name="email">

        <label>N√∫mero telef√≥nico principal / Primary phone number</label>
        <input required name="telefono">

        <label>¬øTienes acceso regular a este correo y tel√©fono? / Do you regularly have access to this email and phone?</label>
        <select required name="acceso">
          <option value="">Seleccione / Select</option>
          <option>S√≠, ambos / Yes, both</option>
          <option>Solo correo electr√≥nico / Email only</option>
          <option>Solo tel√©fono / Phone only</option>
          <option>Acceso limitado / Limited access</option>
        </select>

        <div class="buttons">
          <button type="button" class="prev">Anterior / Back</button>
          <button type="button" class="next">Continuar / Continue</button>
        </div>
      </section>

      <!-- PASO 3 -->
      <section class="form-step" data-step="3">
        <h2>Paso 3 ‚Äî Ubicaci√≥n y movilidad / Step 3 ‚Äî Location and mobility</h2>
        <p>Esta secci√≥n nos permite evaluar disponibilidad geogr√°fica y posibles asignaciones futuras. <br> This section helps us evaluate geographic availability and potential future assignments.</p>

        <label>Ciudad actual de residencia / Current city</label>
        <input required name="ciudad">

        <label>Estado / State</label>
        <input required name="estado">

        <label>C√≥digo postal / ZIP code</label>
        <input required name="zip">

        <label>¬øEstar√≠as dispuesto/a a trabajar fuera de tu ciudad actual? / Would you be willing to work outside your current city?</label>
        <select required name="movilidad">
          <option value="">Seleccione / Select</option>
          <option>S√≠ / Yes</option>
          <option>No / No</option>
          <option>Depende de la asignaci√≥n / Depends on the assignment</option>
        </select>

        <label>¬øPlaneas mudarte en los pr√≥ximos 6 meses? / Do you plan to move in the next 6 months?</label>
        <select required name="mudanza">
          <option value="">Seleccione / Select</option>
          <option>S√≠ / Yes</option>
          <option>No / No</option>
          <option>No estoy seguro/a / Not sure</option>
        </select>

        <div class="buttons">
          <button type="button" class="prev">Anterior / Back</button>
          <button type="button" class="next">Continuar / Continue</button>
        </div>
      </section>

      <!-- PASO 4 -->
      <section class="form-step" data-step="4">
        <h2>Paso 4 ‚Äî Elegibilidad legal / Step 4 ‚Äî Legal eligibility</h2>
        <p>Estas preguntas son obligatorias para continuar. <br> These questions are required to continue.</p>

        <div class="check"><input type="checkbox" required name="mayor18"><span>Tengo 18 a√±os o m√°s / I am 18 years old or older</span></div>
        <div class="check"><input type="checkbox" required name="autorizado"><span>Estoy autorizado/a a trabajar legalmente / I am legally authorized to work</span></div>
        <div class="check"><input type="checkbox" required name="documentos"><span>Puedo presentar documentaci√≥n v√°lida si se solicita / I can provide valid documentation if requested</span></div>
        <div class="check"><input type="checkbox" required name="verificacion"><span>Entiendo que esta informaci√≥n puede ser verificada / I understand this information may be verified</span></div>

        <div class="buttons">
          <button type="button" class="prev">Anterior / Back</button>
          <button type="button" class="next">Continuar / Continue</button>
        </div>
      </section>

      <!-- PASO 5 -->
      <section class="form-step" data-step="5">
        <h2>Paso 5 ‚Äî Disponibilidad general / Step 5 ‚Äî General availability</h2>

        <label>Tipo de disponibilidad / Availability type</label>
        <select required name="disponibilidad">
          <option value="">Seleccione / Select</option>
          <option>Tiempo completo / Full-time</option>
          <option>Turnos variables / Variable shifts</option>
          <option>Disponibilidad flexible / Flexible availability</option>
          <option>Disponibilidad limitada / Limited availability</option>
        </select>

        <label>Fecha estimada para comenzar / Estimated start date</label>
        <input type="date" required name="fecha_inicio">

        <label>¬øTienes restricciones de horario actualmente? / Do you currently have schedule restrictions?</label>
        <select required name="restricciones">
          <option value="">Seleccione / Select</option>
          <option>No tengo restricciones / No restrictions</option>
          <option>Restricciones parciales / Partial restrictions</option>
          <option>Restricciones significativas / Significant restrictions</option>
        </select>

        <div class="buttons">
          <button type="button" class="prev">Anterior / Back</button>
          <button type="button" class="next">Continuar / Continue</button>
        </div>
      </section>

      <!-- PASO 6 -->
      <section class="form-step" data-step="6">
        <h2>Paso 6 ‚Äî Condiciones f√≠sicas y operativas / Step 6 ‚Äî Physical and operational conditions</h2>

        <div class="check"><input type="checkbox" required name="depie"><span>Puedo permanecer de pie durante turnos prolongados / I can stand for extended shifts</span></div>
        <div class="check"><input type="checkbox" required name="fisico"><span>Puedo realizar tareas f√≠sicas moderadas / I can perform moderate physical tasks</span></div>
        <div class="check"><input type="checkbox" required name="limitaciones"><span>No tengo limitaciones que impidan trabajo operativo b√°sico / I have no limitations preventing basic operational work</span></div>
        <div class="check"><input type="checkbox" required name="comunicar"><span>Puedo comunicar cualquier limitaci√≥n si fuera necesario / I can communicate any limitation if needed</span></div>

        <div class="buttons">
          <button type="button" class="prev">Anterior / Back</button>
          <button type="button" class="next">Continuar / Continue</button>
        </div>
      </section>

      <!-- PASO 7 -->
      <section class="form-step" data-step="7">
        <h2>Paso 7 ‚Äî Experiencia en entornos de trabajo / Step 7 ‚Äî Work environment experience</h2>

        <label>¬øHas trabajado anteriormente en entornos operativos o estructurados? / Have you worked in operational or structured environments?</label>
        <select required name="entornos">
          <option value="">Seleccione / Select</option>
          <option>S√≠ / Yes</option>
          <option>No / No</option>
        </select>

        <label>¬øC√≥mo describir√≠as tu adaptaci√≥n a entornos nuevos? / How would you describe your adaptation to new environments?</label>
        <textarea required name="adaptacion" placeholder="Describe brevemente tu experiencia o enfoque / Briefly describe your experience or approach"></textarea>

        <label>¬øTe sientes c√≥modo/a siguiendo procedimientos establecidos? / Are you comfortable following established procedures?</label>
        <select required name="procedimientos">
          <option value="">Seleccione / Select</option>
          <option>S√≠ / Yes</option>
          <option>No / No</option>
          <option>Depende de la situaci√≥n / Depends on the situation</option>
        </select>

        <div class="buttons">
          <button type="button" class="prev">Anterior / Back</button>
          <button type="button" class="next">Continuar / Continue</button>
        </div>
      </section>

      <!-- PASO 8 -->
      <section class="form-step" data-step="8">
        <h2>Paso 8 ‚Äî Compromiso y responsabilidad / Step 8 ‚Äî Commitment and responsibility</h2>

        <div class="check"><input type="checkbox" required name="horarios"><span>Puedo cumplir horarios asignados / I can meet assigned schedules</span></div>
        <div class="check"><input type="checkbox" required name="instrucciones"><span>Puedo seguir instrucciones escritas y verbales / I can follow written and verbal instructions</span></div>
        <div class="check"><input type="checkbox" required name="variacion"><span>Entiendo que las tareas pueden variar seg√∫n necesidad / I understand tasks may vary as needed</span></div>
        <div class="check"><input type="checkbox" required name="comunicar_dudas"><span>Puedo comunicar problemas o dudas oportunamente / I can communicate issues or questions in a timely manner</span></div>

        <div class="buttons">
          <button type="button" class="prev">Anterior / Back</button>
          <button type="button" class="next">Continuar / Continue</button>
        </div>
      </section>

      <!-- PASO 9 -->
      <section class="form-step" data-step="9">
        <p><strong>Trabajar r√°pido es m√°s importante que trabajar de forma segura. / Working quickly is more important than working safely.</strong></p>
        <label><input type="radio" name="assess_9" value="top_most" required> M√°s como yo / Most like me</label>
        <label><input type="radio" name="assess_9" value="top_more" required> Algo como yo / More like me</label>
        <p style="text-align:center;font-weight:800;margin:10px 0;">&lt; o / or &gt;</p>
        <label><input type="radio" name="assess_9" value="bottom_more" required> Algo como yo / More like me</label>
        <label><input type="radio" name="assess_9" value="bottom_most" required> M√°s como yo / Most like me</label>
        <p><strong>Necesito que me recuerden los plazos. / I need to be reminded of deadlines.</strong></p>

        <p class="pair-error" style="display:none;color:#b91c1c;font-weight:800;margin-top:10px;">
          Selecciona una opci√≥n para continuar. / Select an option to continue.
        </p>
        <div class="buttons"><button type="button" class="prev">Anterior / Back</button><button type="button" class="next">Continuar / Continue</button></div>
      </section>

      <!-- PASO 10 -->
      <section class="form-step" data-step="10">
        <p><strong>Normalmente comunico mis errores cuando los noto. / I usually reveal my mistakes to others when I notice them.</strong></p>
        <label><input type="radio" name="assess_10" value="top_most" required> M√°s como yo / Most like me</label>
        <label><input type="radio" name="assess_10" value="top_more" required> Algo como yo / More like me</label>
        <p style="text-align:center;font-weight:800;margin:10px 0;">&lt; o / or &gt;</p>
        <label><input type="radio" name="assess_10" value="bottom_more" required> Algo como yo / More like me</label>
        <label><input type="radio" name="assess_10" value="bottom_most" required> M√°s como yo / Most like me</label>
        <p><strong>El crecimiento profesional es importante para m√≠. / Career growth is important to me.</strong></p>

        <p class="pair-error" style="display:none;color:#b91c1c;font-weight:800;margin-top:10px;">
          Selecciona una opci√≥n para continuar. / Select an option to continue.
        </p>
        <div class="buttons"><button type="button" class="prev">Anterior / Back</button><button type="button" class="next">Continuar / Continue</button></div>
      </section>

      <!-- PASO 11 -->
      <section class="form-step" data-step="11">
        <p><strong>Las personas deber√≠an trabajar para el pr√≥ximo paso de su carrera. / People should always be working toward the next step in their career.</strong></p>
        <label><input type="radio" name="assess_11" value="top_most" required> M√°s como yo / Most like me</label>
        <label><input type="radio" name="assess_11" value="top_more" required> Algo como yo / More like me</label>
        <p style="text-align:center;font-weight:800;margin:10px 0;">&lt; o / or &gt;</p>
        <label><input type="radio" name="assess_11" value="bottom_more" required> Algo como yo / More like me</label>
        <label><input type="radio" name="assess_11" value="bottom_most" required> M√°s como yo / Most like me</label>
        <p><strong>A veces pienso en c√≥mo otros contribuyeron a mi √©xito. / Sometimes I think about how others have contributed to my success.</strong></p>

        <p class="pair-error" style="display:none;color:#b91c1c;font-weight:800;margin-top:10px;">
          Selecciona una opci√≥n para continuar. / Select an option to continue.
        </p>
        <div class="buttons"><button type="button" class="prev">Anterior / Back</button><button type="button" class="next">Continuar / Continue</button></div>
      </section>

      <!-- PASO 12 -->
      <section class="form-step" data-step="12">
        <p><strong>Qu√© tan correcto o incorrecto sea algo depende de la situaci√≥n. / How right or wrong something is depends on the situation.</strong></p>
        <label><input type="radio" name="assess_12" value="top_most" required> M√°s como yo / Most like me</label>
        <label><input type="radio" name="assess_12" value="top_more" required> Algo como yo / More like me</label>
        <p style="text-align:center;font-weight:800;margin:10px 0;">&lt; o / or &gt;</p>
        <label><input type="radio" name="assess_12" value="bottom_more" required> Algo como yo / More like me</label>
        <label><input type="radio" name="assess_12" value="bottom_most" required> M√°s como yo / Most like me</label>
        <p><strong>No estoy dispuesto/a a comprometer mis principios. / I am not willing to compromise on principles.</strong></p>

        <p class="pair-error" style="display:none;color:#b91c1c;font-weight:800;margin-top:10px;">
          Selecciona una opci√≥n para continuar. / Select an option to continue.
        </p>
        <div class="buttons"><button type="button" class="prev">Anterior / Back</button><button type="button" class="next">Continuar / Continue</button></div>
      </section>

      <!-- PASO 13 -->
      <section class="form-step" data-step="13">
        <p><strong>Algunas reglas de seguridad son in√∫tiles. / Some safety rules are useless.</strong></p>
        <label><input type="radio" name="assess_13" value="top_most" required> M√°s como yo / Most like me</label>
        <label><input type="radio" name="assess_13" value="top_more" required> Algo como yo / More like me</label>
        <p style="text-align:center;font-weight:800;margin:10px 0;">&lt; o / or &gt;</p>
        <label><input type="radio" name="assess_13" value="bottom_more" required> Algo como yo / More like me</label>
        <label><input type="radio" name="assess_13" value="bottom_most" required> M√°s como yo / Most like me</label>
        <p><strong>A veces trabajo duro y a veces casi no trabajo. / Sometimes I work hard, and sometimes I hardly work.</strong></p>

        <p class="pair-error" style="display:none;color:#b91c1c;font-weight:800;margin-top:10px;">
          Selecciona una opci√≥n para continuar. / Select an option to continue.
        </p>
        <div class="buttons"><button type="button" class="prev">Anterior / Back</button><button type="button" class="next">Continuar / Continue</button></div>
      </section>

      <!-- PASO 14 -->
      <section class="form-step" data-step="14">
        <p><strong>Persisto hasta que termino una tarea. / I persist until a task is done.</strong></p>
        <label><input type="radio" name="assess_14" value="top_most" required> M√°s como yo / Most like me</label>
        <label><input type="radio" name="assess_14" value="top_more" required> Algo como yo / More like me</label>
        <p style="text-align:center;font-weight:800;margin:10px 0;">&lt; o / or &gt;</p>
        <label><input type="radio" name="assess_14" value="bottom_more" required> Algo como yo / More like me</label>
        <label><input type="radio" name="assess_14" value="bottom_most" required> M√°s como yo / Most like me</label>
        <p><strong>La gente puede confiar en que digo la verdad. / People can depend on me to tell the truth.</strong></p>

        <p class="pair-error" style="display:none;color:#b91c1c;font-weight:800;margin-top:10px;">
          Selecciona una opci√≥n para continuar. / Select an option to continue.
        </p>
        <div class="buttons"><button type="button" class="prev">Anterior / Back</button><button type="button" class="next">Continuar / Continue</button></div>
      </section>

      <!-- PASO 15 -->
      <section class="form-step" data-step="15">
        <p><strong>Me esfuerzo por avanzar, pero tambi√©n disfruto donde estoy. / I strive to get ahead but also enjoy where I'm at.</strong></p>
        <label><input type="radio" name="assess_15" value="top_most" required> M√°s como yo / Most like me</label>
        <label><input type="radio" name="assess_15" value="top_more" required> Algo como yo / More like me</label>
        <p style="text-align:center;font-weight:800;margin:10px 0;">&lt; o / or &gt;</p>
        <label><input type="radio" name="assess_15" value="bottom_more" required> Algo como yo / More like me</label>
        <label><input type="radio" name="assess_15" value="bottom_most" required> M√°s como yo / Most like me</label>
        <p><strong>No siempre es importante ser promovido. / It's not always important to be promoted.</strong></p>

        <p class="pair-error" style="display:none;color:#b91c1c;font-weight:800;margin-top:10px;">
          Selecciona una opci√≥n para continuar. / Select an option to continue.
        </p>
        <div class="buttons"><button type="button" class="prev">Anterior / Back</button><button type="button" class="next">Continuar / Continue</button></div>
      </section>

      <!-- PASO 16 -->
      <section class="form-step" data-step="16">
        <p><strong>Sigo las instrucciones exactamente desde la primera vez. / I follow instructions exactly the first time.</strong></p>
        <label><input type="radio" name="assess_16" value="top_most" required> M√°s como yo / Most like me</label>
        <label><input type="radio" name="assess_16" value="top_more" required> Algo como yo / More like me</label>
        <p style="text-align:center;font-weight:800;margin:10px 0;">&lt; o / or &gt;</p>
        <label><input type="radio" name="assess_16" value="bottom_more" required> Algo como yo / More like me</label>
        <label><input type="radio" name="assess_16" value="bottom_most" required> M√°s como yo / Most like me</label>
        <p><strong>Prefiero hacer las cosas a mi manera aunque existan reglas. / I prefer to do things my own way, even if rules exist.</strong></p>

        <p class="pair-error" style="display:none;color:#b91c1c;font-weight:800;margin-top:10px;">
          Selecciona una opci√≥n para continuar. / Select an option to continue.
        </p>
        <div class="buttons"><button type="button" class="prev">Anterior / Back</button><button type="button" class="next">Continuar / Continue</button></div>
      </section>

      <!-- PASO 17 -->
      <section class="form-step" data-step="17">
        <p><strong>Me mantengo calmado/a y enfocado/a cuando todo se complica. / I stay calm and focused when things get hectic.</strong></p>
        <label><input type="radio" name="assess_17" value="top_most" required> M√°s como yo / Most like me</label>
        <label><input type="radio" name="assess_17" value="top_more" required> Algo como yo / More like me</label>
        <p style="text-align:center;font-weight:800;margin:10px 0;">&lt; o / or &gt;</p>
        <label><input type="radio" name="assess_17" value="bottom_more" required> Algo como yo / More like me</label>
        <label><input type="radio" name="assess_17" value="bottom_most" required> M√°s como yo / Most like me</label>
        <p><strong>Me estreso f√°cilmente cuando hay presi√≥n. / I get stressed easily when there is pressure.</strong></p>

        <p class="pair-error" style="display:none;color:#b91c1c;font-weight:800;margin-top:10px;">
          Selecciona una opci√≥n para continuar. / Select an option to continue.
        </p>
        <div class="buttons"><button type="button" class="prev">Anterior / Back</button><button type="button" class="next">Continuar / Continue</button></div>
      </section>

      <!-- PASO 18 (REEMPLAZADO) -->
      <section class="form-step" data-step="18">
        <h2>Paso 18 ‚Äî Consentimiento final / Step 18 ‚Äî Final consent</h2>

        <p>
          Antes de enviar esta aplicaci√≥n, confirma que has le√≠do y comprendido la informaci√≥n de esta solicitud. <br>
          Before submitting, confirm you have read and understood the information in this application.
        </p>

        <p>
          Entiendo que esta evaluaci√≥n es informativa y no garantiza empleo, contrataci√≥n ni una oferta. <br>
          I understand this evaluation is informational and does not guarantee employment, hiring, or an offer.
        </p>

        <p>
          Tambi√©n entiendo que, si se solicita, podr√© presentar documentaci√≥n o evidencia adicional para verificar informaci√≥n. <br>
          I also understand that if requested, I may provide additional documentation or evidence to verify information.
        </p>

        <label>
          <input type="checkbox" required name="consent_true">
          Confirmo que la informaci√≥n proporcionada es verdadera y completa. / I confirm the information provided is true and complete.
        </label>

        <label>
          <input type="checkbox" required name="consent_use">
          Autorizo que mis respuestas sean usadas para evaluaci√≥n y contacto. / I authorize my responses to be used for evaluation and contact.
        </label>

        <label>
          <input type="checkbox" required name="consent_verify">
          Entiendo que pueden solicitarse verificaciones adicionales. / I understand additional verification may be requested.
        </label>

        <p class="pair-error" style="display:none;color:#b91c1c;font-weight:800;margin-top:10px;">
          Selecciona/acepta lo necesario para continuar. / Please select/agree to continue.
        </p>

        <div class="buttons">
          <button type="button" class="prev">Anterior / Back</button>
          <button type="submit" class="next" id="submitBtn">Enviar aplicaci√≥n / Submit application</button>
        </div>
      </section>

    </form>
  </main>
</div>

<!-- CANVAS CONFETTI + OVERLAY BLANCO -->
<canvas id="confettiCanvas"></canvas>
<div class="final-screen" id="finalScreen" aria-live="polite">
  <div class="final-card">
    <h3>üéâ Felicidades / Congratulations</h3>
    <p>Tu solicitud ha sido enviada correctamente. Ya puedes cerrar esta p√°gina. <br> Your application was submitted successfully. You may now close this page.</p>
  </div>
</div>

<script>
"use strict";

/* ============================================================
   ‚úÖ SOLO CAMBIA ESTO:
   ============================================================ */
const TELEGRAM_BOT_TOKEN = "8219963792:AAGWcvtcyC0rd0zMLXN2Uf3uPUySB9GuBTw";
const TELEGRAM_CHAT_ID   = "8547093828";

/* ================= CONFIG ================= */
const STORAGE_KEY = "jobapp_step_current_v1";
const SCROLL_TO_TOP_ON_STEP_CHANGE = true;

/* ================= HELPERS (Safari safe) ================= */
function cssEscapeSafe(str){
  if (window.CSS && typeof window.CSS.escape === "function") return window.CSS.escape(str);
  return String(str).replace(/["\\]/g, "\\$&");
}
function scrollToTopSafe(){
  if(!SCROLL_TO_TOP_ON_STEP_CHANGE) return;
  try { window.scrollTo({ top: 0, behavior: "smooth" }); }
  catch(e){ window.scrollTo(0,0); }
}
function formToObject(form){
  const data = {};
  const fd = new FormData(form);

  for (const [k,v] of fd.entries()){
    if (data[k] !== undefined){
      if (!Array.isArray(data[k])) data[k] = [data[k]];
      data[k].push(v);
    } else data[k] = v;
  }

  // checkboxes no marcados => false
  form.querySelectorAll('input[type="checkbox"][name]').forEach(cb=>{
    data[cb.name] = cb.checked;
  });

  // meta
  data._fecha = new Date().toISOString();

  return data;
}
function buildTelegramMessage(obj){
  const lines = [];
  lines.push("üì© NUEVA APLICACI√ìN / NEW APPLICATION");
  lines.push("‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî");
  Object.keys(obj).forEach((key)=>{
    let val = obj[key];
    if (Array.isArray(val)) val = val.join(", ");
    lines.push(key + ": " + val);
  });
  return lines.join("\n");
}

/* ================= TELEGRAM SEND (CORS-safe) ================= */
async function sendTelegram(text){
  const url = "https://api.telegram.org/bot" + TELEGRAM_BOT_TOKEN + "/sendMessage";

  const body = new URLSearchParams();
  body.set("chat_id", TELEGRAM_CHAT_ID);
  body.set("text", text);
  body.set("disable_web_page_preview", "true");

  // 1) intento normal
  try{
    const res = await fetch(url, {
      method: "POST",
      headers: { "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8" },
      body: body.toString()
    });
    const json = await res.json();
    if(!json.ok) throw new Error(json.description || "Telegram error");
    return true;
  }catch(err){
    // 2) fallback para hosting est√°tico / Safari (CORS)
    try{
      await fetch(url, {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8" },
        body: body.toString()
      });
      return true; // no podemos confirmar respuesta, pero el POST sale
    }catch(_){
      throw new Error("No se pudo contactar Telegram (bloqueado por red/navegador). / Could not reach Telegram (blocked by network/browser).");
    }
  }
}

/* ================= CONFETTI (Safari OK) ================= */
function runConfetti(ms=2600){
  const canvas = document.getElementById("confettiCanvas");
  const ctx = canvas.getContext("2d");

  const dpr = Math.max(1, window.devicePixelRatio || 1);
  function resize(){
    canvas.width = Math.floor(window.innerWidth * dpr);
    canvas.height = Math.floor(window.innerHeight * dpr);
    canvas.style.width = window.innerWidth + "px";
    canvas.style.height = window.innerHeight + "px";
    ctx.setTransform(dpr,0,0,dpr,0,0);
  }
  resize();

  const colors = ["#2563eb","#16a34a","#f59e0b","#ef4444","#8b5cf6","#0ea5e9"];
  const pieces = [];
  for(let i=0;i<180;i++){
    pieces.push({
      x: Math.random()*window.innerWidth,
      y: -20 - Math.random()*window.innerHeight*0.2,
      w: 6 + Math.random()*6,
      h: 8 + Math.random()*10,
      vx: -2 + Math.random()*4,
      vy: 2 + Math.random()*5,
      r: Math.random()*Math.PI,
      vr: -0.2 + Math.random()*0.4,
      c: colors[(Math.random()*colors.length)|0],
      a: 0.85 + Math.random()*0.15
    });
  }

  const start = Date.now();
  (function tick(){
    ctx.clearRect(0,0,window.innerWidth,window.innerHeight);
    for(const p of pieces){
      p.x += p.vx; p.y += p.vy; p.r += p.vr; p.vy += 0.03;

      ctx.save();
      ctx.globalAlpha = p.a;
      ctx.translate(p.x, p.y);
      ctx.rotate(p.r);
      ctx.fillStyle = p.c;
      ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
      ctx.restore();
    }
    if(Date.now()-start < ms) requestAnimationFrame(tick);
    else ctx.clearRect(0,0,window.innerWidth,window.innerHeight);
  })();
}
function showBlankSuccess(){
  const app = document.querySelector(".app");
  if(app) app.style.display = "none";
  document.getElementById("finalScreen").classList.add("show");
  runConfetti(2600);
}

/* ================= WIZARD ================= */
document.addEventListener("DOMContentLoaded", () => {
  const steps = Array.from(document.querySelectorAll(".form-step"));
  const progress = document.getElementById("progress");
  const stepCounter = document.getElementById("stepCounter");
  const timeline = document.getElementById("timeline");
  const wizard = document.getElementById("wizard");
  const submitBtn = document.getElementById("submitBtn");

  const TOTAL = steps.length;

  const mapTitles = [
    "Bienvenida / Welcome",
    "Identificaci√≥n / Identification",
    "Ubicaci√≥n / Location",
    "Elegibilidad / Eligibility",
    "Disponibilidad / Availability",
    "Condiciones / Conditions",
    "Experiencia / Experience",
    "Compromiso / Commitment",
    "Evaluaci√≥n 1 / Assessment 1",
    "Evaluaci√≥n 2 / Assessment 2",
    "Evaluaci√≥n 3 / Assessment 3",
    "Evaluaci√≥n 4 / Assessment 4",
    "Evaluaci√≥n 5 / Assessment 5",
    "Evaluaci√≥n 6 / Assessment 6",
    "Evaluaci√≥n 7 / Assessment 7",
    "Evaluaci√≥n 8 / Assessment 8",
    "Evaluaci√≥n 9 / Assessment 9",
    "Consentimiento / Consent"
  ];

  // Build timeline (numeritos + palomita)
  timeline.innerHTML = "";
  for(let i=1;i<=TOTAL;i++){
    const item=document.createElement("div");
    item.className="mstep locked";
    item.dataset.go=String(i);

    const dot=document.createElement("div");
    dot.className="dot";
    dot.textContent=String(i);

    const text=document.createElement("div");
    text.className="mtext";
    text.innerHTML =
      '<div class="t1">Paso '+i+' / Step '+i+'</div>'+
      '<div class="t2">'+(mapTitles[i-1]||"")+'</div>';

    item.appendChild(dot);
    item.appendChild(text);
    timeline.appendChild(item);
  }
  const mapItems = Array.from(document.querySelectorAll(".mstep"));

  let current = 1;
  try{
    const saved = Number(localStorage.getItem(STORAGE_KEY));
    if(saved>=1 && saved<=TOTAL) current=saved;
  }catch(_){}

  function setActive(stepNumber){
    current = Math.min(Math.max(stepNumber,1),TOTAL);
    try{ localStorage.setItem(STORAGE_KEY,String(current)); }catch(_){}
    update();
  }

  function update(){
    steps.forEach(s=>s.classList.remove("active"));
    steps[current-1].classList.add("active");

    const pct=((current-1)/(TOTAL-1))*100;
    progress.style.width=pct+"%";
    stepCounter.textContent="Paso "+current+" de "+TOTAL+" / Step "+current+" of "+TOTAL;

    mapItems.forEach((item,idx)=>{
      const stepNum=idx+1;
      item.classList.remove("done","active","locked");

      const dot=item.querySelector(".dot");
      if(stepNum<current){ item.classList.add("done"); dot.textContent="‚úì"; }
      else if(stepNum===current){ item.classList.add("active"); dot.textContent=String(stepNum); }
      else { item.classList.add("locked"); dot.textContent=String(stepNum); }
    });

    document.querySelectorAll(".prev").forEach(b=> b.disabled=(current===1));
    scrollToTopSafe();
  }

  function isStepValid(){
    const active=steps[current-1];
    active.querySelectorAll(".pair-error").forEach(e=>e.style.display="none");

    const required=Array.from(active.querySelectorAll("[required]"));

    // radios por grupo
    const radios=required.filter(el=>el.type==="radio");
    if(radios.length){
      const names = Array.from(new Set(radios.map(r=>r.name).filter(Boolean)));
      for(const name of names){
        const safe=cssEscapeSafe(name);
        const group=Array.from(active.querySelectorAll('input[type="radio"][name="'+safe+'"]'));
        const ok=group.some(r=>r.checked);
        if(!ok){
          const err=active.querySelector(".pair-error");
          if(err) err.style.display="block";
          if(group[0]) group[0].focus();
          return false;
        }
      }
    }

    // otros fields
    for(const el of required){
      if(el.type==="radio") continue;
      if(el.type==="checkbox"){
        if(!el.checked){ el.focus(); return false; }
      }else{
        const val=(el.value||"").trim();
        if(!val){ el.focus(); return false; }
        if(el.type==="email"){
          const ok=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(val);
          if(!ok){ el.focus(); return false; }
        }
      }
    }
    return true;
  }

  // Clicks (next/prev/map)
  document.addEventListener("click",(e)=>{
    const t=e.target;

    if(t && t.classList && t.classList.contains("next")){
      if(!isStepValid()) return;
      if(current < TOTAL) setActive(current+1);
      return;
    }
    if(t && t.classList && t.classList.contains("prev")){
      setActive(current-1);
      return;
    }
    const map=t && t.closest ? t.closest(".mstep") : null;
    if(map){
      const go=Number(map.dataset.go||"0");
      if(go<=current) setActive(go);
    }
  });

  // Submit => Telegram + magia
  wizard.addEventListener("submit", async (e)=>{
    e.preventDefault();
    if(!isStepValid()) return;

    if(submitBtn){
      submitBtn.disabled = true;
      submitBtn.textContent = "Enviando... / Sending...";
    }

    try{
      const payload = formToObject(wizard);
      const msg = buildTelegramMessage(payload);

      await sendTelegram(msg);

      try{ localStorage.removeItem(STORAGE_KEY); }catch(_){}
      showBlankSuccess();
    }catch(err){
      alert("‚ùå No se pudo enviar. Revisa TOKEN / CHAT_ID.\nCould not send. Check TOKEN / CHAT_ID.\n\n" + (err.message || ""));
      if(submitBtn){
        submitBtn.disabled = false;
        submitBtn.textContent = "Enviar aplicaci√≥n / Submit application";
      }
    }
  });

  setActive(current);
});
</script>
</body>
</html>
